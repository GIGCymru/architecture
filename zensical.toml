#:schema .vscode/zensical-schema.json
# Note: Schema validation currently incomplete so will false-positive on 
# failures as currently using the old mkdocs-materia schema. 
# See https://github.com/zensical/backlog/issues/48 

# Zensical configuration for GIG Cymru NHS Wales - Architecture
# Migrated from mkdocs.yml and doc/.nav.yml

[project]
site_name = "GIG Cymru NHS Wales - Architecture"
site_url = "https://gigcymru.github.io/architecture/"
repo_url = "https://github.com/GIGCymru/architecture/"
docs_dir = "doc"
edit_uri = "edit/main/doc/"
copyright = "Copyright &copy; 2025 GIG Cymru - NHS Wales â€“ <a href=\"#__consent\">Change cookie settings</a>"
extra_css = ["stylesheets/extra.css"]

# Navigation structure (converted from doc/.nav.yml)
# Note: Zensical requires explicit page listing - directory paths don't auto-discover subpages
nav = [
  {"Home" = "index.md"},
  {"Principles" = [
    {"DHCW" = [
      {"Introduction" = "principles/index.md"},
      {"Architecture Principles" = "principles/architecture-principles/"},
      {"Clinical" = "principles/clinical/"},
      {"Cloud and Infrastructure" = "principles/cloud-and-infrastructure/"},
      {"Data and Analytics" = "principles/data-and-analytics/"},
      {"Digital Products and Software Engineering" = "principles/digital-products-and-software-engineering/"},
      {"Digital Workplace" = "principles/digital-workplace/"},
      {"Open Architecture" = "principles/open-architecture/"},
      {"Security and Identity" = "principles/security-and-identity/"},
      {"User Centred Design" = "principles/user-centred-design/"},
    ]},
  ]},
  {"Design Authority" = [
    {"DHCW" = [
      {"Introduction" = "design-authority/index.md"},
      {"Decision Template" = "design-authority/dhcw/architecture-decision-record-template.md"},
      {"Decision Process" = "design-authority/dhcw/architecture-decision-record-process/index.md"},
      {"Design Template" = "design-authority/dhcw/architecture-design-overview-template.md"},
      {"ToR" = "design-authority/dhcw/terms-of-reference/"},
      {"Meetings" = [
        {"2025-10-17" = "design-authority/dhcw/meetings/2025-10-17/"},
        {"2025-09-05" = "design-authority/dhcw/meetings/2025-09-05/"},
        {"2025-07-25" = "design-authority/dhcw/meetings/2025-07-25/"},
        {"2025-06-13" = "design-authority/dhcw/meetings/2025-06-13/"},
      ]},
      {"Enterprise Architecture Metamodel" = [
        "design-authority/ea-metamodel/index.md",
        {"Multiple Application Instances" = "design-authority/ea-metamodel/multiple-application-instances/"},
      ]},
    ]},
  ]},
  {"Decisions" = [
    {"DHCW" = [
      {"Introduction" = "decisions/index.md"},
      {"Meta Decisions" = [
        {"Architecture Decision Records Naming Conventions" = "decisions/meta-decisions/architecture-decision-records-naming-conventions/"},
        {"Use Awesome-Nav for Site Navigation (Deprecated)" = "decisions/meta-decisions/enable-mkdocs-enhanced-site-navigation/"},
        {"Format Architecture Decision Records with Markdown" = "decisions/meta-decisions/format-architecture-decision-records-with-markdown/"},
        {"Mastering of Architecture Templates" = "decisions/meta-decisions/mastering-of-architecture-templates/"},
        {"Use a Linter for Markdown Documents" = "decisions/meta-decisions/use-a-linter-for-markdown-documents/"},
        {"Use arc42 for Architecture Overview Documents" = "decisions/meta-decisions/use-arc42-for-architecture-overview-documents/"},
        {"Use Architecture Decision Records and Structure" = "decisions/meta-decisions/use-architecture-decision-records-and-structure/"},
        {"Use Material for MkDocs for Publishing (Deprecated)" = "decisions/meta-decisions/use-material-for-mkdocs-for-publishing/"},
        {"Use Mermaid for Documenting Diagrams" = "decisions/meta-decisions/use-mermaid-for-documenting-diagrams/"},
        {"Use Spell Checker for Documents" = "decisions/meta-decisions/use-spell-checker-for-documents/"},
        {"Use Zensical for Publishing" = "decisions/meta-decisions/use-zensical-for-publishing/"},
        {"Migrate from Make to Just for Command Running" = "decisions/meta-decisions/migrate-from-make-to-just/"},
      ]},
      {"Process Decisions" = [
        {"Git Organizations" = "decisions/process-decisions/git-organizations/"},
        {"Hosting Data in the United States or the United Kingdom" = "decisions/process-decisions/hosting-data-in-the-united-states-or-the-united-kingdom/"},
        {"Knowledge" = "decisions/process-decisions/knowledge/"},
        {"Ways of Working" = "decisions/process-decisions/ways-of-working/"},
      ]},
      {"Technical Decisions" = [
        {"Cloud Hosting for Documents Capabilities" = "decisions/technical-decisions/cloud-hosting-for-documents-capabilities/README.md"},
        {"Cloud Provider Workload Placement" = "decisions/technical-decisions/cloud-workload-placement/"},
        {"Containerization" = "decisions/technical-decisions/containerization/"},
        {"Document Services" = "decisions/technical-decisions/document-services/README.md"},
        {"FHIR for Interoperability First" = "decisions/technical-decisions/fhir-for-interoperability-first/"},
        {"Live DORA Metrics Dashboards" = "decisions/technical-decisions/live-dora-metrics-dashboards/"},
        {"Python Script Runner" = "decisions/technical-decisions/python-script-runner/"},
      ]},
    ]},
  ]},
]

# Markdown extensions at project level
[project.markdown_extensions.abbr]
[project.markdown_extensions.attr_list]
[project.markdown_extensions.admonition]

[project.markdown_extensions.pymdownx.details]
[project.markdown_extensions.pymdownx.highlight]
anchor_linenums = true
line_spans = "__span"
pygments_lang_class = true

[project.markdown_extensions.pymdownx.inlinehilite]

[project.markdown_extensions.pymdownx.snippets]
check_paths = true
auto_append = ["includes/abbreviations.md"]

[project.markdown_extensions.pymdownx.tabbed]
alternate_style = true

[project.markdown_extensions.pymdownx.superfences]
custom_fences = [
  {name = "mermaid", class = "mermaid", format = "pymdownx.superfences.fence_code_format"}
]

# Theme configuration
[project.theme]
name = "modern"
custom_dir = "doc/overrides"
logo = "assets/logo.png"
favicon = "assets/favicon.ico"

# Theme features - must be at theme level, not nested
features = [
  "navigation.tabs",
  "navigation.footer",
  "navigation.path",
  "navigation.instant",
  "navigation.top",
  "content.action.edit",
  "content.action.view",
  "content.code.copy",
  "search.highlight"
]

[[project.theme.palette]]
scheme = "default"
toggle.icon = "lucide/sun"
toggle.name = "Switch to dark mode"

[[project.theme.palette]]
scheme = "slate"
toggle.icon = "lucide/moon"
toggle.name = "Switch to light mode"

[project.theme.icon]
repo = "fontawesome/brands/github"

[project.theme.font]
text = "Rubik"

# Cookie consent configuration
[project.extra.consent]
title = "Cookie consent"
description = """
We use cookies to optimise site functionality and give you the best
possible experience, recognise your repeated visits and preferences, as
well as to measure the effectiveness of our site and whether
users find what they're searching for. With your consent, you're helping
us to make our site better.
"""

# Cookie consent cookies - using dict format to avoid 'list' error
[project.extra.consent.cookies]
analytics = {name = "Simple Analytics", checked = true}

# Analytics configuration
[project.extra.analytics]
provider = "simple"
